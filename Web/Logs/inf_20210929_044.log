2021-09-29T20:58:20.5474310+03:00 [INF] (Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager) User profile is available. Using '"C:\Users\A.Dzenisevich\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2021-09-29T20:58:20.6101429+03:00 [INF] (HealthChecks.UI.Core.HostedService.UIInitializationHostedService) Initializing UI Database
2021-09-29T20:58:21.0514295+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:58:21.4037348+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request starting HTTP/2 GET https://localhost:44370/index.html - -
2021-09-29T20:58:21.4095385+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:58:21.4409487+03:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2021-09-29T20:58:21.4410478+03:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2021-09-29T20:58:21.4410935+03:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\LabWebApp\Web"
2021-09-29T20:58:21.5836774+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request finished HTTP/2 GET https://localhost:44370/index.html - - - 200 - text/html;charset=utf-8 181.2184ms
2021-09-29T20:58:21.7048627+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request starting HTTP/2 GET https://localhost:44370/swagger/v1/swagger.json - -
2021-09-29T20:58:21.8283570+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request finished HTTP/2 GET https://localhost:44370/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 123.4529ms
2021-09-29T20:58:22.9468878+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request starting HTTP/1.1 PUT https://localhost:44370/orders/?id=1 application/json 151
2021-09-29T20:58:22.9599612+03:00 [INF] (Microsoft.AspNetCore.Authorization.DefaultAuthorizationService) Authorization was successful.
2021-09-29T20:58:22.9611576+03:00 [INF] (Microsoft.AspNetCore.Routing.EndpointMiddleware) Executing endpoint '"Web.Controllers.OrdersController.UpdateOrderAsync (Web)"'
2021-09-29T20:58:22.9799092+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker) Route matched with "{action = \"UpdateOrder\", controller = \"Orders\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderAsync(Int32, BLL.ViewModels.OrderProductsViewModel)" on controller "Web.Controllers.OrdersController" ("Web").
2021-09-29T20:58:22.9819221+03:00 [INF] (Microsoft.AspNetCore.Authorization.DefaultAuthorizationService) Authorization was successful.
2021-09-29T20:58:25.6503604+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2021-09-29T20:58:26.0101629+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("35"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Products] AS [p]
        WHERE [p].[Id] = @__id_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2021-09-29T20:58:26.0465028+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[Id], [p].[Background], [p].[Count], [p].[DateCreated], [p].[Genre], [p].[IsDeleted], [p].[Logo], [p].[Name], [p].[Platform], [p].[Price], [p].[Rating], [p].[TotalRating]
FROM [Products] AS [p]
WHERE [p].[Id] = @__id_0"
2021-09-29T20:58:27.0945112+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AddressDeliveryId], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0"
2021-09-29T20:58:27.1612591+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__id_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [a].[Id], [a].[City], [a].[Country], [a].[EntranceNumber], [a].[FlatNumber], [a].[FloorNumber], [a].[HouseBuilding], [a].[HouseNumber], [a].[Street]
FROM [Addresses] AS [a]
WHERE [a].[Id] = @__id_0"
2021-09-29T20:58:27.6988796+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__orderId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [o].[Id], [o].[AddressDeliveryId], [o].[CreationDate], [o].[DeliveryType], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE ([o].[Id] = @__orderId_0) AND ([o].[Status] = 1)"
2021-09-29T20:58:27.8105504+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@p8='?' (DbType = Int32), @p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (Size = 20), @p6='?' (DbType = Int32), @p7='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Addresses] SET [City] = @p0, [Country] = @p1, [EntranceNumber] = @p2, [FlatNumber] = @p3, [FloorNumber] = @p4, [HouseBuilding] = @p5, [HouseNumber] = @p6, [Street] = @p7
WHERE [Id] = @p8;
SELECT @@ROWCOUNT;"
2021-09-29T20:58:27.8337742+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_orderId_0='?' (DbType = Int32), @__product_ProductId_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[ProductId], [p].[OrderId], [p].[ProductAmount]
FROM [ProductOrders] AS [p]
WHERE ([p].[OrderId] = @__8__locals1_orderId_0) AND ([p].[ProductId] = @__product_ProductId_1)"
2021-09-29T20:58:27.8472818+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [ProductOrders] SET [ProductAmount] = @p0
WHERE [OrderId] = @p1 AND [ProductId] = @p2;
SELECT @@ROWCOUNT;"
2021-09-29T20:58:27.8508658+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__orderId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [p].[ProductId], [p].[OrderId], [p].[ProductAmount]
FROM [ProductOrders] AS [p]
WHERE [p].[OrderId] = @__orderId_0"
2021-09-29T20:58:27.8601001+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__orderId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [o].[Id], [o].[AddressDeliveryId], [o].[CreationDate], [o].[DeliveryType], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE ([o].[Id] = @__orderId_0) AND ([o].[Status] = 1)"
2021-09-29T20:58:27.8706066+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=["@p6='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Orders] SET [AddressDeliveryId] = @p0, [CreationDate] = @p1, [DeliveryType] = @p2, [Status] = @p3, [TotalAmount] = @p4, [UserId] = @p5
WHERE [Id] = @p6;
SELECT @@ROWCOUNT;"
2021-09-29T20:58:27.8836517+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor) Executing "OkObjectResult", writing value of type '"BLL.ViewModels.ReturnProductOrderViewModel"'.
2021-09-29T20:58:27.9240478+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker) Executed action "Web.Controllers.OrdersController.UpdateOrderAsync (Web)" in 4940.6213ms
2021-09-29T20:58:27.9244943+03:00 [INF] (Microsoft.AspNetCore.Routing.EndpointMiddleware) Executed endpoint '"Web.Controllers.OrdersController.UpdateOrderAsync (Web)"'
2021-09-29T20:58:27.9274820+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request finished HTTP/1.1 PUT https://localhost:44370/orders/?id=1 application/json 151 - 200 432 application/json;+charset=utf-8 4980.7215ms
2021-09-29T20:58:31.4733853+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:58:41.4891681+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:58:51.5020906+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:59:01.5160551+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:59:04.1280674+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request starting HTTP/1.1 POST https://localhost:44370/orders/buy/?id=1 - 0
2021-09-29T20:59:04.1299350+03:00 [INF] (Microsoft.AspNetCore.Authorization.DefaultAuthorizationService) Authorization was successful.
2021-09-29T20:59:04.1300413+03:00 [INF] (Microsoft.AspNetCore.Routing.EndpointMiddleware) Executing endpoint '"Web.Controllers.OrdersController.BuyOrderAsync (Web)"'
2021-09-29T20:59:04.1352195+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker) Route matched with "{action = \"BuyOrder\", controller = \"Orders\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyOrderAsync(Int32)" on controller "Web.Controllers.OrdersController" ("Web").
2021-09-29T20:59:04.1355140+03:00 [INF] (Microsoft.AspNetCore.Authorization.DefaultAuthorizationService) Authorization was successful.
2021-09-29T20:59:04.1596886+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2021-09-29T20:59:04.1634126+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__orderId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [o].[Id], [o].[AddressDeliveryId], [o].[CreationDate], [o].[DeliveryType], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0"
2021-09-29T20:59:04.1664790+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Orders] SET [Status] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;"
2021-09-29T20:59:04.1713276+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=["@__orderId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT [p].[ProductId], [p].[OrderId], [p].[ProductAmount]
FROM [ProductOrders] AS [p]
WHERE [p].[OrderId] = @__orderId_0"
2021-09-29T20:59:04.1755247+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__boughtProduct_ProductId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[Id], [p].[Background], [p].[Count], [p].[DateCreated], [p].[Genre], [p].[IsDeleted], [p].[Logo], [p].[Name], [p].[Platform], [p].[Price], [p].[Rating], [p].[TotalRating]
FROM [Products] AS [p]
WHERE [p].[Id] = @__boughtProduct_ProductId_0"
2021-09-29T20:59:04.1963910+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [Count] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;"
2021-09-29T20:59:04.1992582+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=["@__boughtProduct_ProductId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [p].[Id], [p].[Background], [p].[Count], [p].[DateCreated], [p].[Genre], [p].[IsDeleted], [p].[Logo], [p].[Name], [p].[Platform], [p].[Price], [p].[Rating], [p].[TotalRating]
FROM [Products] AS [p]
WHERE [p].[Id] = @__boughtProduct_ProductId_0"
2021-09-29T20:59:04.2276918+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Products] SET [Count] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;"
2021-09-29T20:59:04.2310392+03:00 [INF] (Microsoft.AspNetCore.Mvc.StatusCodeResult) Executing HttpStatusCodeResult, setting HTTP status code 204
2021-09-29T20:59:04.2311219+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker) Executed action "Web.Controllers.OrdersController.BuyOrderAsync (Web)" in 95.8252ms
2021-09-29T20:59:04.2311743+03:00 [INF] (Microsoft.AspNetCore.Routing.EndpointMiddleware) Executed endpoint '"Web.Controllers.OrdersController.BuyOrderAsync (Web)"'
2021-09-29T20:59:04.2316610+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request finished HTTP/1.1 POST https://localhost:44370/orders/buy/?id=1 - 0 - 204 - - 103.6305ms
2021-09-29T20:59:11.5232369+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:59:21.5305908+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
2021-09-29T20:59:28.3881596+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request starting HTTP/1.1 POST https://localhost:44370/orders/buy/?id=1 - 0
2021-09-29T20:59:28.3890626+03:00 [INF] (Microsoft.AspNetCore.Authorization.DefaultAuthorizationService) Authorization was successful.
2021-09-29T20:59:28.3891140+03:00 [INF] (Microsoft.AspNetCore.Routing.EndpointMiddleware) Executing endpoint '"Web.Controllers.OrdersController.BuyOrderAsync (Web)"'
2021-09-29T20:59:28.3892919+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker) Route matched with "{action = \"BuyOrder\", controller = \"Orders\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BuyOrderAsync(Int32)" on controller "Web.Controllers.OrdersController" ("Web").
2021-09-29T20:59:28.3893696+03:00 [INF] (Microsoft.AspNetCore.Authorization.DefaultAuthorizationService) Authorization was successful.
2021-09-29T20:59:28.3959541+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"ApplicationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "None"
2021-09-29T20:59:28.3974699+03:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@__orderId_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [o].[Id], [o].[AddressDeliveryId], [o].[CreationDate], [o].[DeliveryType], [o].[Status], [o].[TotalAmount], [o].[UserId]
FROM [Orders] AS [o]
WHERE [o].[Id] = @__orderId_0"
2021-09-29T20:59:28.3985813+03:00 [INF] (Microsoft.AspNetCore.Mvc.StatusCodeResult) Executing HttpStatusCodeResult, setting HTTP status code 204
2021-09-29T20:59:28.3987532+03:00 [INF] (Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker) Executed action "Web.Controllers.OrdersController.BuyOrderAsync (Web)" in 9.3861ms
2021-09-29T20:59:28.3988384+03:00 [INF] (Microsoft.AspNetCore.Routing.EndpointMiddleware) Executed endpoint '"Web.Controllers.OrdersController.BuyOrderAsync (Web)"'
2021-09-29T20:59:28.3992125+03:00 [INF] (Microsoft.AspNetCore.Hosting.Diagnostics) Request finished HTTP/1.1 POST https://localhost:44370/orders/buy/?id=1 - 0 - 204 - - 11.0878ms
2021-09-29T20:59:31.5472193+03:00 [INF] (Microsoft.EntityFrameworkCore.Infrastructure) Entity Framework Core "5.0.10" initialized '"HealthChecksDb"' using provider '"Microsoft.EntityFrameworkCore.InMemory"' with options: "StoreName=HealthChecksUI "
